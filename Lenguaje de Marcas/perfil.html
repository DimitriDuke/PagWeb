<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Perfil - Stone Age</title>
        <link rel="stylesheet" href="./style/perfil.css">
        <link rel="stylesheet" href="./style/index.css">
        <link rel="stylesheet" href="./style/chat-flotante.css">
    </head>
    <body>
        <header>
            <nav class="dropdown-menu">
                <button class="dropbtn">‚ò∞ Men√∫</button>
                <div class="dropdown-content">
                  <a href="index.html">Inicio</a>
                  <a href="clasificacion.html">Clasificaci√≥n</a>
                  <a href="informacion.html">Informaci√≥n</a>
                  <a href="como-jugar.html">C√≥mo Jugar</a>
                </div>
            </nav>
            <h1>Mi Perfil</h1>
            <div class="header-buttons">
                <button id="btnLogout">Cerrar Sesi√≥n</button>
            </div>
        </header>

        <main>
            <div class="perfil-container">
                <div class="perfil-card">
                    <h2>Informaci√≥n del Jugador</h2>
                    <div id="loading">Cargando informaci√≥n...</div>
                    <div id="perfil-info" style="display: none;">
                        <p><strong>Nickname:</strong> <span id="nickname"></span></p>
                        <p><strong>Email:</strong> <span id="email"></span></p>
                        <p><strong>Edad:</strong> <span id="edad"></span></p>
                    </div>
                    
                    <div class="error-message" id="error-message"></div>
                    
                    <button id="btnEditarPerfil" class="btn">Editar Perfil</button>
                    <button id="btnEliminarCuenta" class="btn btn-danger">Eliminar Cuenta</button>
                </div>
                
              
                
                <div class="estadisticas-card">
                    <h2>Estad√≠sticas de Juego</h2>
                    <div id="loading-stats">Cargando estad√≠sticas...</div>
                    <div id="estadisticas" style="display: none;">
                        
<div class="records-container">
    <h3>R√©cords Personales</h3>
    <div class="records-grid">
        <div class="record-card">
            <div class="record-icon">üèÜ</div>
            <div class="record-title">Mejor Puntuaci√≥n</div>
            <div id="mejor-puntuacion" class="record-value">0</div>
            <div id="mejor-puntuacion-fecha" class="record-date">-</div>
        </div>
        <div class="record-card">
            <div class="record-icon">‚è±Ô∏è</div>
            <div class="record-title">Partida M√°s R√°pida</div>
            <div id="mejor-tiempo" class="record-value">-</div>
            <div id="mejor-tiempo-fecha" class="record-date">-</div>
        </div>
    </div>
</div>
                
<div class="partidas-table-container">
    <h3>Historial de partidas</h3>
    <div id="loading-partidas">Cargando historial de partidas...</div>
    <div id="partidas-container" style="display: none;">
        <table id="tabla-partidas" class="partidas-table">
            <thead>
                <tr>
                    <th>Partida</th>
                    <th>Fecha</th>
                    <th>Nivel</th>
                    <th>Kills</th>
                    <th>Muertes</th>
                    <th>Tiempo (s)</th>
                    <th>Puntuaci√≥n</th>
                </tr>
            </thead>
            <tbody id="partidas-body">
      
            </tbody>
        </table>
    </div>
    <div id="no-partidas" style="display: none;">No hay partidas registradas.</div>
</div>
                    </div>
                </div>
            </div>

<div id="modal-editar" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <h2>Editar Perfil</h2>
        <form id="form-editar-perfil">
            <div class="form-group">
                <label for="edit-nickname">Nickname:</label>
                <input type="text" id="edit-nickname" required>
            </div>
            <div class="form-group">
                <label for="edit-email">Email:</label>
                <input type="email" id="edit-email" required>
            </div>
            <button type="submit" class="btn">Guardar Cambios</button>
        </form>
    </div>
</div>

       

   
<div id="modal-confirmar" class="modal confirm-modal">
    <div class="modal-content">
        <span class="close-confirm close">&times;</span>
        <h2>Confirmar eliminaci√≥n</h2>
        <p>¬øEst√°s seguro de que deseas eliminar tu cuenta? Esta acci√≥n no se puede deshacer.</p>
        <div class="confirm-buttons">
            <button id="btnCancelarEliminar" class="btn confirm-cancel">Cancelar</button>
            <button id="btnConfirmarEliminar" class="btn confirm-delete">Eliminar</button>
        </div>
    </div>
</div>
<!-- Este c√≥digo debe incluirse al final del body en tus p√°ginas HTML -->
<div id="chat-flotante" class="chat-container">
    <!-- Bot√≥n minimizado del chat -->
    <div class="chat-button" id="chat-button">
      <span class="chat-icon">üí¨</span>
      <span class="chat-badge" id="chat-badge">0</span>
    </div>
    
    <!-- Panel del chat -->
    <div class="chat-panel" id="chat-panel">
      <!-- Cabecera del chat -->
      <div class="chat-header">
        <div class="chat-title">Mensajes</div>
        <div class="chat-actions">
          <button class="chat-minimize" id="chat-minimize">‚àí</button>
        </div>
      </div>
      
      <!-- Lista de conversaciones (vista principal) -->
      <div class="chat-conversations" id="chat-conversations">
        <!-- Bot√≥n para nuevo mensaje -->
        <div class="chat-toolbar">
          <button id="new-message-btn" class="new-message-btn">Nuevo mensaje</button>
        </div>
        
        <!-- Contenedor de b√∫squeda de usuarios -->
        <div class="chat-search-container" id="chat-search-container" style="display: none;">
          <input type="text" id="user-search" placeholder="Buscar usuario...">
          <div class="search-results" id="search-results">
            <!-- Aqu√≠ aparecer√°n los resultados de la b√∫squeda -->
          </div>
          <button id="cancel-search" class="cancel-search-btn">Cancelar</button>
        </div>
        
        <div class="chat-loading" id="chat-loading-conversations">Cargando conversaciones...</div>
        <div class="chat-no-messages" id="chat-no-messages">No tienes conversaciones</div>
        <ul class="chat-users-list" id="chat-users-list">
          <!-- Aqu√≠ se cargar√°n los usuarios con conversaciones -->
        </ul>
      </div>
      
      <!-- Vista de conversaci√≥n espec√≠fica -->
      <div class="chat-messages" id="chat-messages">
        <div class="chat-conversation-header">
          <button class="chat-back" id="chat-back">‚Üê</button>
          <div class="chat-user-name" id="chat-current-user">Usuario</div>
        </div>
        <div class="chat-loading" id="chat-loading-messages">Cargando mensajes...</div>
        <div class="chat-message-container" id="chat-message-container">
          <!-- Aqu√≠ se cargar√°n los mensajes -->
        </div>
        <div class="chat-input-container">
          <input type="text" id="chat-input" placeholder="Escribe un mensaje...">
          <button id="chat-send">Enviar</button>
        </div>
      </div>
    </div>
  </div>

<script src="javascript/auth-manager.js"></script>
<script src="javascript/chat-flotante.js"></script>
<script src="javascript/perfil.js"></script>
    </body>
</html>